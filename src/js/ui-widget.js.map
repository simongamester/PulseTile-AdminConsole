{"version":3,"sources":["src/ui-widget.js"],"names":["qewd","$","parseJSON","schemas","templates","read","textArea","textBox","calendarBox","readOnly","selectBox","edit","document","ready","setSchema","hide","change","e","click","preventDefault","renderView","alert","module","val","JSON","stringify","html","method","qewdJson","schemaJson","viewHtml","callChosen","replace","title","i","fields","length","template","thisField","type","formatDateTime","name","selectOptions","options","chosen","multiple","label","show","datetime","m_names","Array","d","Date","setTime","curr_date","getDate","curr_month","getMonth","curr_year","getFullYear","selectedValue","keys","Object","output","console","log","key","value"],"mappings":"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","sourcesContent":["// Default Data - Used to populate in the form\nvar qewd = $.parseJSON(`{\n\t\"personalnotes\": {\n\t\t\"author\": \"Dr Tony Shannon\",\n\t\t\"dateCreated\": 1456287062000,\n\t\t\"noteType\": \"Generic Plugin\",\n\t\t\"source\": \"ethercis\",\n\t\t\"sourceId\": \"23dbda9d-7688-426c-8cb8-312a4f351071\"\n\t},\n\t\"orders\": {\n\t\t\"name\": \"Cardiac-ECG\",\n\t\t\"orderDate\": 1458738936944,\n\t\t\"source\": \"ethercis\",\n\t\t\"sourceId\": \"23dbda9d-7688-426c-8cb8-312a4f351071\"\n\t},\n\t\"events\": {\n\t\t\"dateCreated\": 1494586220000,\n\t\t\"dateTime\": 1494496220958,\n\t\t\"description\": \"Needs nursing and supervisory care\",\n\t\t\"name\": \"Discharge to care home\",\n\t\t\"source\": \"ethercis\",\n\t\t\"sourceId\": \"93ac376d-3ff4-4e0b-b080-47eb3fe81750\",\n\t\t\"type\": \"Admission\",\n\t\t\"typeMultiple\": \"Admission\"\n\t},\n\t\"testresults\": {\n\t\t\"dateCreated\":1427004662000,\n\t\t\"sampleTaken\":1426889462518,\n\t\t\"source\":\"ethercis\",\n\t\t\"sourceId\":\"810272ac-28e8-4928-b61b-79dcef4b4170\",\n\t\t\"testName\":\"Example Name\"\n\t},\n\t\"procedures\": {\n\t\t\"date\":1436969493829,\n\t\t\"name\":\"total replacement of hip\",\n\t\t\"source\":\"ethercis\",\n\t\t\"sourceId\":\"fa7408c3-7d69-4f50-84ac-cbf735a0ab18\",\n\t\t\"time\":54693829\n\t},\n\t\"vaccinations\": {\n\t\t\"dateCreated\":1356149462000,\n\t\t\"source\":\"ethercis\",\n\t\t\"sourceId\":\"3e13f196-2334-41b6-b788-660464e7436a\",\n\t\t\"vaccinationName\":\"Influenza\"\n\t},\n\t\"referrals\": {\n\t\t\"dateOfReferral\":1458792662000,\n\t\t\"referralFrom\":\"Tony Shannon\",\n\t\t\"referralTo\":\"Ripplefields Optometry service\",\n\t\t\"source\":\"ethercis\",\n\t\t\"sourceId\":\"94133578-f505-4e76-b4ed-762462508801\"\n\t},\n\t\"mdt\": {\n\t\t\"dateOfMeeting\":1455062400000,\n\t\t\"dateOfRequest\":1458739933006,\n\t\t\"serviceTeam\":\"\",\n\t\t\"source\":\"marand\",\n\t\t\"sourceId\":\"5836b208-160f-4925-b2b1-a26626432940\"\n\t}\n\n}`);\n\nvar schemas = $.parseJSON(`{\n\t\"personalnotes\": {\n\t\t\"title\": \"Personal Notes\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"author\",\n\t\t\t\t\"type\": \"textBox\",\n\t\t\t\t\"label\": \"Author\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"dateCreated\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Date Created\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"noteType\",\n\t\t\t\t\"type\": \"textArea\",\n\t\t\t\t\"label\": \"Note Type\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"source\",\n\t\t\t\t\"type\": \"readOnly\",\n\t\t\t\t\"label\": \"Source\"\n\t\t\t}\n\t\t]\n\t},\n\t\"orders\": {\n\t\t\"title\": \"Orders\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"name\",\n\t\t\t\t\"type\": \"textBox\",\n\t\t\t\t\"label\": \"Name\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"orderDate\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Order Created\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"source\",\n\t\t\t\t\"type\": \"readOnly\",\n\t\t\t\t\"label\": \"Source\"\n\t\t\t}\n\t\t]\n\t},\n\t\"events\": {\n\t\t\"title\": \"Events\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"dateCreated\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Date Created\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"dateTime\",\n\t\t\t\t\"type\": \"textBox\",\n\t\t\t\t\"label\": \"Time\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"description\",\n\t\t\t\t\"type\": \"textArea\",\n\t\t\t\t\"label\": \"Description\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"name\",\n\t\t\t\t\"type\": \"textBox\",\n\t\t\t\t\"label\": \"Name\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"source\",\n\t\t\t\t\"type\": \"readOnly\",\n\t\t\t\t\"label\": \"Source\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"type\",\n\t\t\t\t\"type\": \"selectBox\",\n\t\t\t\t\"label\": \"Type (Singular Select)\",\n\t\t\t\t\"options\": {\n\t\t\t\t\t\"Appointment\": \"Appointment\",\n\t\t\t\t\t\"Admission\": \"Admission\",\n\t\t\t\t\t\"Transfer\": \"Transfer\",\n\t\t\t\t\t\"Discharge\": \"Discharge\"\n\t\t\t\t},\n\t\t\t\t\"chosen\": \"true\",\n\t\t\t\t\"multiple\": \"false\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"typeMultiple\",\n\t\t\t\t\"type\": \"selectBox\",\n\t\t\t\t\"label\": \"Type (Multiple Select)\",\n\t\t\t\t\"options\": {\n\t\t\t\t\t\"Appointment\": \"Appointment\",\n\t\t\t\t\t\"Admission\": \"Admission\",\n\t\t\t\t\t\"Transfer\": \"Transfer\",\n\t\t\t\t\t\"Discharge\": \"Discharge\"\n\t\t\t\t},\n\t\t\t\t\"chosen\": \"true\",\n\t\t\t\t\"multiple\": \"true\"\n\t\t\t}\n\t\t]\n\t},\n\t\"testresults\": {\n\t\t\"title\": \"Test Results\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"dateCreated\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Date Created\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"sampleTaken\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Sample Taken\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"testName\",\n\t\t\t\t\"type\": \"textBox\",\n\t\t\t\t\"label\": \"Test Name\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"source\",\n\t\t\t\t\"type\": \"readOnly\",\n\t\t\t\t\"label\": \"Source\"\n\t\t\t}\n\t\t]\n\t},\n\t\"procedures\": {\n\t\t\"title\": \"Procedures\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"date\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Date Created\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"name\",\n\t\t\t\t\"type\": \"textBox\",\n\t\t\t\t\"label\": \"Sample Taken\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"time\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Test Name\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"source\",\n\t\t\t\t\"type\": \"readOnly\",\n\t\t\t\t\"label\": \"Source\"\n\t\t\t}\n\t\t]\n\t},\n\t\"vaccinations\": {\n\t\t\"title\": \"Vaccinations\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"dateCreated\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Date Created\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"vaccinationName\",\n\t\t\t\t\"type\": \"textBox\",\n\t\t\t\t\"label\": \"Vaccination Name\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"source\",\n\t\t\t\t\"type\": \"readOnly\",\n\t\t\t\t\"label\": \"Source\"\n\t\t\t}\n\t\t]\n\t},\n\t\"referrals\": {\n\t\t\"title\": \"Refarrals\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"dateOfReferral\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Date of Referral\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"referralFrom\",\n\t\t\t\t\"type\": \"textBox\",\n\t\t\t\t\"label\": \"Referral From\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"referralTo\",\n\t\t\t\t\"type\": \"textBox\",\n\t\t\t\t\"label\": \"Referral To\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"source\",\n\t\t\t\t\"type\": \"readOnly\",\n\t\t\t\t\"label\": \"Source\"\n\t\t\t}\n\t\t]\n\t},\n\t\"mdt\": {\n\t\t\"title\": \"MDT\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"dateOfMeeting\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Date of Meeting\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"dateOfRequest\",\n\t\t\t\t\"type\": \"calendarBox\",\n\t\t\t\t\"label\": \"Date of Request\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"serviceTeam\",\n\t\t\t\t\"type\": \"textBox\",\n\t\t\t\t\"label\": \"Service Team\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"source\",\n\t\t\t\t\"type\": \"readOnly\",\n\t\t\t\t\"label\": \"Source\"\n\t\t\t}\n\t\t]\n\t}\n}`);\n\nvar templates = {\n\t\n\tread: {\n\t\ttextArea: `\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"schema\">{{label}}</label>\n\t\t\t<pre>{{value}}</pre>\n\t\t</div>\n\t\t`,\n\t\t\n\t\ttextBox: `\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"schema\">{{label}}</label>\n\t\t\t<p>{{value}}</p>\n\t\t</div>\n\t\t`,\n\t\t\n\t\tcalendarBox: `\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"schema\">{{label}}</label>\n\t\t\t<p>{{value}}</p>\n\t\t</div>\n\t\t`,\n\t\t\n\t\treadOnly: `\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"schema\">{{label}}</label>\n\t\t\t<p>{{value}}</p>\n\t\t</div>\n\t\t`,\n\t\t\n\t\tselectBox: `\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"schema\">{{label}}</label>\n\t\t\t<p>{{value}}</p>\n\t\t</div>\n\t\t`\n\t},\n\t\n\tedit: {\n\t\ttextArea: `\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"schema\">{{label}}</label>\n\t\t\t<textarea class=\"form-control\" id=\"{{name}}\" rows=\"3\">{{value}}</textarea>\n\t\t</div>\n\t\t`,\n\t\t\n\t\ttextBox: `\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"schema\">{{label}}</label>\n\t\t\t<input class=\"form-control\" id=\"{{name}}\" name=\"{{name}}\" value=\"{{value}}\" />\n\t\t</div>\n\t\t`,\n\t\t\n\t\tcalendarBox: `\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"basic-url\">{{label}}</label>\n\t\t\t<div class=\"input-group mb-3\">\n\t\t\t\t<div class=\"input-group-prepend\">\n\t\t\t\t\t<span class=\"input-group-text\" id=\"{{name}}-addon\"><i class=\"fa fa-calendar\"></i></span>\n\t\t\t\t</div>\n\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"{{name}}\" aria-describedby=\"{{name}}-addon\" value=\"{{value}}\">\n\t\t\t</div>\n\t\t</div>\n\t\t`,\n\t\t\n\t\treadOnly: `\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"schema\">{{label}}</label>\n\t\t\t<input class=\"form-control\" id=\"{{name}}\" name=\"{{name}}\" value=\"{{value}}\" readonly=\"readonly\" />\n\t\t</div>\n\t\t`,\n\t\t\n\t\tselectBox: `\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"schema\">{{label}}</label>\n\t\t\t<select id=\"{{name}}\" name=\"{{name}}\" data-value=\"{{value}}\" class=\"form-control chosen-select\" {{multiple}}>\n\t\t\t\t{{options}}\n\t\t\t</select>\n\t\t</div>\n\t\t`\n\t}\n\t\n\t\n}\n\n$(document).ready(function(){\n\t\n\tif( qewd && schemas ){\n\t\t\n\t\t// Init\n\t\tsetSchema();\n\t\t$('#page').hide();\n\t\t\n\t\t// Change Module / Schema\n\t\t$('#module').change(function(e){\n\t\t\tsetSchema();\n\t\t});\n\t\t\n\t\t// Build Views\n\t\t$('#build-edit').click(function(e){\n\t\t\te.preventDefault();\n\t\t\trenderView('edit');\n\t\t});\n\t\t\n\t\t$('#build-read').click(function(e){\n\t\t\te.preventDefault();\n\t\t\trenderView('read');\n\t\t});\n\t\t\n\t} else {\n\t\talert('Global JSON Error');\n\t}\n\t\n});\n\n\nfunction setSchema(){\n\tvar module = $('#module option:selected').val();\n\t\n\t// Populate\n\t$('#qewd').val( JSON.stringify(qewd[module], null, 2) );\n\t$('#schema').val( JSON.stringify(schemas[module], null, 2) );\n\t\n\t$('#page').hide();\n\t$('#htmlOutput').html($('#view-' + module).html() );\n}\n\n\nfunction renderView(method){\n\t\n\tvar qewdJson = $.parseJSON($('#qewd').val());\n\tvar schemaJson = $.parseJSON($('#schema').val());\n\t\n\tif( qewdJson && schemaJson ){\n\t\t\n\t\tvar module = $('#module option:selected').val();\n\t\t\n\t\t// Pull the correct view template\n\t\tvar viewHtml = $('#view-' + module).html();\n\t\tvar callChosen = false; // Gets set if schema contains a select with chosen: true\n\t\t\n\t\t// View-Level Render\n\t\tviewHtml = viewHtml.replace(\"{{module.title}}\", schemaJson.title);\n\t\t\n\t\t// Field-Level Render\n\t\tfor( var i = 0; i < schemaJson.fields.length; i++ ){\n\t\t\t\n\t\t\tvar template;\n\t\t\tvar thisField = schemaJson.fields[i];\n\t\t\t\n\t\t\t// Get Template\n\t\t\ttemplate = templates[method][thisField.type];\n\t\t\t\n\t\t\t//Type-Specific Elements\n\t\t\tswitch( thisField.type ){\n\t\t\t\tcase 'calendarBox':\n\t\t\t\t\ttemplate = template.replace('{{value}}', formatDateTime(qewdJson[thisField.name]) );\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcase 'selectBox':\n\t\t\t\t\ttemplate = template.replace('{{options}}', selectOptions(thisField.options, qewdJson[thisField.name]) );\n\t\t\t\t\t\n\t\t\t\t\t// Chosen\n\t\t\t\t\tif( thisField.chosen == 'true' ){\n\t\t\t\t\t\tcallChosen = true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Multiple\n\t\t\t\t\tif( thisField.multiple == 'true' ){\n\t\t\t\t\t\ttemplate = template.replace('{{multiple}}', 'multiple' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttemplate = template.replace('{{multiple}}', '' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\t// Render Template - Common Elements\n\t\t\tif( template ){\n\t\t\t\ttemplate = template.replace('{{name}}', thisField.name);\n\t\t\t\ttemplate = template.replace('{{label}}', thisField.label);\n\t\t\t\ttemplate = template.replace('{{value}}', qewdJson[thisField.name]);\n\t\t\t}\n\t\t\t\n\t\t\t//dynamic.append(template);\n\t\t\tviewHtml = viewHtml.replace('{{schema.'+thisField.name+'}}', template);\n\t\t\t\n\t\t}\n\t\t\n\t\t$('#htmlOutput').html( viewHtml );\n\t\t$('#view').html( viewHtml );\n\t\t$('#page').show();\n\t\t\n\t\t// Add / Refresh Chosen\n\t\tif( callChosen ){\n\t\t\t$(\".chosen-select\").chosen();\n\t\t}\n\n\t} else {\n\t\talert('JSON Error');\n\t}\n\t\n}\n\nfunction formatDateTime(datetime){\n\tvar m_names = new Array(\"Jan\", \"Feb\", \"Mar\", \"Apt\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\");\n\t\n\tvar d = new Date();\n\td.setTime(datetime);\n\t\n\tvar curr_date = d.getDate();\n\tvar curr_month = d.getMonth();\n\tvar curr_year = d.getFullYear();\n\t\n\treturn curr_date + \"-\" + m_names[curr_month] + \"-\" + curr_year;\n}\n\n\nfunction selectOptions(options, selectedValue){\n\t\n\tvar keys = Object.keys(options);\n\tvar output = '';\n\t\n\tconsole.log( selectedValue );\n\t\n\tfor(var i=0;i<keys.length;i++){\n\t    var key = keys[i];\n\t    var value = options[key];\n\t    \n\t    if( selectedValue == key ){\n\t\t    output+='<option value=\"' + key + '\" selected=\"selected\">' + value + '</option>';\n\t\t} else {\n\t\t    output+='<option value=\"' + key + '\">' + value + '</option>';\n\t\t}\n\t}\n\t\n\treturn output;\n\t\n}"],"file":"ui-widget.js"}